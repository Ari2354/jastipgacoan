<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Jastip Gacoan</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
<div class="container mt-4">
    <h2>Panel Admin Jastip Gacoan</h2>
    <ul class="nav nav-tabs" id="adminTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="produk-tab" data-bs-toggle="tab" data-bs-target="#produk" type="button" role="tab">Produk</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="pesanan-tab" data-bs-toggle="tab" data-bs-target="#pesanan" type="button" role="tab">Pesanan</button>
      </li>
    </ul>
    <div class="tab-content mt-3">
      <!-- Tab Produk -->
      <div class="tab-pane fade show active" id="produk" role="tabpanel">
        <form id="produkForm" class="row g-2 mb-3">
          <div class="col-md-4">
            <input type="text" class="form-control" id="namaProduk" placeholder="Nama Produk" required>
          </div>
          <div class="col-md-3">
            <input type="number" class="form-control" id="hargaProduk" placeholder="Harga" required>
          </div>
          <div class="col-md-3">
            <input type="text" class="form-control" id="kategoriProduk" placeholder="Kategori">
          </div>
          <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">Tambah</button>
          </div>
        </form>
        <table class="table table-bordered" id="produkTable">
          <thead>
            <tr>
              <th>Nama</th>
              <th>Harga</th>
              <th>Kategori</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <!-- Tab Pesanan -->
      <div class="tab-pane fade" id="pesanan" role="tabpanel">
        <table class="table table-bordered" id="pesananTable">
          <thead>
            <tr>
              <th>Nama</th>
              <th>Alamat</th>
              <th>No. HP</th>
              <th>Pembayaran</th>
              <th>Pesanan</th>
              <th>Total</th>
              <th>Tanggal</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
</div>
<script>
const SUPABASE_URL = 'https://aniulxoqzwnrxtdmpbmv.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFuaXVseG9xenducnh0ZG1wYm12Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg0MDA4MjQsImV4cCI6MjA2Mzk3NjgyNH0.NOi9RVyGAR4jTI_kXh7zk3aI1VIPyah8MdFT4KcZnTQ';
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// CRUD Produk
async function loadProduk() {
  const { data, error } = await supabase.from('produk').select('*').order('id', { ascending: false });
  const tbody = document.querySelector('#produkTable tbody');
  tbody.innerHTML = '';
  if (data) {
    data.forEach(row => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${row.nama}</td>
        <td>${row.harga}</td>
        <td>${row.kategori || '-'}</td>
        <td>
          <button class="btn btn-warning btn-sm" onclick="editProduk(${row.id}, '${row.nama}', ${row.harga}, '${row.kategori || ''}')">Edit</button>
          <button class="btn btn-danger btn-sm" onclick="hapusProduk(${row.id})">Hapus</button>
        </td>
      `;
      tbody.appendChild(tr);
    });
  }
}
document.getElementById('produkForm').onsubmit = async function(e) {
  e.preventDefault();
  const nama = document.getElementById('namaProduk').value;
  const harga = parseInt(document.getElementById('hargaProduk').value);
  const kategori = document.getElementById('kategoriProduk').value;
  await supabase.from('produk').insert([{ nama, harga, kategori }]);
  this.reset();
  loadProduk();
};
window.hapusProduk = async function(id) {
  if (confirm('Hapus produk ini?')) {
    await supabase.from('produk').delete().eq('id', id);
    loadProduk();
  }
};
loadProduk();

window.editProduk = function(id, nama, harga, kategori) {
  document.getElementById('namaProduk').value = nama;
  document.getElementById('hargaProduk').value = harga;
  document.getElementById('kategoriProduk').value = kategori;
  document.getElementById('produkForm').onsubmit = async function(e) {
    e.preventDefault();
    await supabase.from('produk').update({
      nama: document.getElementById('namaProduk').value,
      harga: parseInt(document.getElementById('hargaProduk').value),
      kategori: document.getElementById('kategoriProduk').value
    }).eq('id', id);/td>
    this.reset();
    loadProduk();td>
    // Kembalikan ke mode tambahd>
    document.getElementById('produkForm').onsubmit = tambahProdukHandler;
  };<td>${row.tanggal}</td>
};
const tambahProdukHandler = document.getElementById('produkForm').onsubmit;body.appendChild(tr);
 });
// Tampilkan Pesanan }
async function loadPesanan() {
  const { data, error } = await supabase.from('pesanan').select('*').order('id', { ascending: false });an();
  const tbody = document.querySelector('#pesananTable tbody');
  tbody.innerHTML = ''; src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  if (data) {



















</html></body><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script></script>loadPesanan();}  }    });      tbody.appendChild(tr);      `;        <td>${row.tanggal}</td>        <td>${row.total}</td>        <td>${row.pesanan}</td>        <td>${row.pembayaran}</td>        <td>${row.hp}</td>        <td>${row.nama}</td>      tr.innerHTML = `      const tr = document.createElement('tr');    data.forEach(row => {</html>