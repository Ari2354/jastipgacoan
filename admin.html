<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Rangkuman Transaksi WhatsApp</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    textarea {
      width: 100%;
      height: 200px;
      margin-bottom: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 8px;
      text-align: left;
    }
    .status {
      font-weight: bold;
      padding: 4px 8px;
      border-radius: 5px;
    }
    .belum { background-color: orange; color: white; }
    .dibayar { background-color: green; color: white; }
    .dikirim { background-color: blue; color: white; }
  </style>
</head>
<body>
  <h2>Panel Rangkuman Transaksi dari WhatsApp</h2>
  <textarea id="waText" placeholder="Tempel salinan WhatsApp di sini..."></textarea>
  <button onclick="prosesTransaksi()">Proses Transaksi</button>

  <table id="tabelTransaksi">
    <thead>
      <tr>
        <th>Nama</th>
        <th>Pesanan</th>
        <th>Total</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    function prosesTransaksi() {
      const teks = document.getElementById("waText").value;
      const baris = teks.split("\n");
      let data = {};
      const tabelBody = document.querySelector("#tabelTransaksi tbody");
      tabelBody.innerHTML = "";

      baris.forEach((line) => {
        let [key, value] = line.split(":");
        if (key && value) {
          data[key.trim().toLowerCase()] = value.trim();
        }

        if (line.trim() === "") {
          if (data.nama && data.pesanan && data.total && data.status) {
            const row = tabelBody.insertRow();
            row.insertCell(0).textContent = data.nama;
            row.insertCell(1).textContent = data.pesanan;
            row.insertCell(2).textContent = data.total;

            const statusCell = row.insertCell(3);
            statusCell.textContent = data.status;
            statusCell.className = "status " + data.status.toLowerCase().replace(" ", "");

            data = {}; // reset
          }
        }
      });
    }
  </script>
</body>
</html>
