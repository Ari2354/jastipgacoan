<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu & Pesan - Jastip Gacoan</title> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />


    <style>
        /* CSS Variables for Themes (Sama seperti file CSS lainnya) */
        :root {
            /* Light Theme Colors (Based on Gacoan Logo Red) */
            --background-color: #f8f9fa; /* Light grey background */
            --text-color: #333333; /* Dark grey for text */
            --primary-color: #E53935; /* Gacoan-like Red */
            --secondary-color: #757575; /* Medium grey */
            --accent-color: #FFA000; /* Orange/Yellow from logo */
            --card-background: #ffffff; /* White card background */
            --card-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); /* Shadow for container */
            --section-title-color: #E53935; /* Red title */
            --hero-gradient: linear-gradient(135deg, #E53935, #FF7043); /* Red to light orange gradient */
            --footer-background: #E53935; /* Red footer */
            --footer-text-color: white;
            --navbar-bg-light: rgba(255, 255, 255, 0.9);
            --branding-bg: var(--card-background); /* Branding section background */
            --branding-title-color: var(--primary-color); /* Branding title color */
            --branding-text-color: var(--text-color); /* Branding text color */
             --menu-category-color: var(--primary-color); /* Menu category title color */
             --menu-item-border: #ddd; /* Menu item border */
             --form-container-bg: var(--card-background); /* Form background */
             --button-success-background: #28a745; /* Bootstrap green for success button */
             --button-success-border: #28a745;
             --button-success-hover: #218838;
             --order-item-border-list: #ddd; /* Border for list items in summary */
             --confirmation-color: #28a745; /* Green for confirmation */
             /* RGB colors for glow effect */
            --primary-color-rgb: 229, 57, 53; /* E53935 */
        }

        /* Dark Theme Colors */
        html[data-theme="dark"] {
            --background-color: #212529; /* Dark background */
            --text-color: #e0e0e0; /* Light grey text */
            --primary-color: #EF5350; /* Slightly brighter red for dark mode contrast */
            --secondary-color: #BDBDBD; /* Lighter grey */
            --accent-color: #FFB300; /* Slightly brighter orange/yellow */
            --card-background: #343a40; /* Dark card background */
            --card-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); /* Darker shadow */
            --section-title-color: #EF5350; /* Red title */
            --hero-gradient: linear-gradient(135deg, #0d0d0d, #421212); /* Dark grey to dark red gradient */
            --footer-background: #0d0d0d; /* Almost black footer */
            --footer-text-color: #BDBDBD; /* Secondary grey text */
            --navbar-bg-dark: rgba(26, 26, 26, 0.9);
            --branding-bg: var(--card-background); /* Branding section background */
            --branding-title-color: var(--primary-color); /* Branding title color */
            --branding-text-color: var(--text-color); /* Branding text color */
             --menu-category-color: var(--primary-color); /* Menu category title color */
             --menu-item-border: #555; /* Menu item border */
             --form-container-bg: var(--card-background); /* Form background */
             --button-success-background: #218838; /* Darker green */
             --button-success-border: #1e7e34;
             --button-success-hover: #1a712d;
             --order-item-border-list: #555; /* Darker border for list items in summary */
             --confirmation-color: #218838; /* Darker green */
             /* RGB colors for glow effect */
            --primary-color-rgb: 239, 83, 80; /* EF5350 */
        }


        /* --- Global Styles --- */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease; /* Smooth transition for theme change */
            padding-top: 0; /* Remove body padding-top */
             padding-bottom: 0; /* Remove body padding-bottom */
        }

        h1, h2, h3, h4, h5, h6 {
            color: var(--section-title-color);
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
        }

        a:hover {
            color: var(--accent-color); /* Accent color on hover */
            text-decoration: underline;
        }

        .text-primary {
            color: var(--primary-color) !important;
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            /* Manual hover color */
            background-color: #D32F2F; /* Slightly darker red */
            border-color: #D32F2F; /* Slightly darker red */
            color: white;
            opacity: 0.95;
        }

         .btn-outline-primary {
             color: var(--primary-color);
             border-color: var(--primary-color);
         }

         .btn-outline-primary:hover {
             background-color: var(--primary-color);
             color: var(--background-color);
         }


        /* --- Navbar --- */
        #main-navbar {
            background-color: var(--navbar-bg-light); /* Semi-transparent background */
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            transition: background-color 0.3s ease; /* Smooth transition */
            z-index: 1020; /* Ensure navbar is above most content */
            position: fixed; /* Stay fixed at the top */
            top: 0;
            left: 0;
            right: 0;
        }

        html[data-theme="dark"] #main-navbar {
             background-color: var(--navbar-bg-dark);
        }

        #main-navbar .navbar-brand {
            color: var(--text-color) !important; /* Ensure brand color changes */
            font-weight: 700;
        }

        #main-navbar .navbar-brand img {
             height: 30px; /* Ukuran logo di navbar */
             margin-right: 8px;
            /* Adjust logo color if needed - e.g., invert if it's a dark logo for dark mode */
             filter: invert(var(--filter-invert-logo, 0));
        }

         html[data-theme="dark"] #main-navbar .navbar-brand img {
              /* Example: invert dark logo in dark mode */
              /* filter: invert(1); */
         }


        #main-navbar .nav-link {
            color: var(--text-color) !important; /* Ensure link color changes */
        }

        #main-navbar .nav-link.active {
             color: var(--primary-color) !important; /* Active link color */
             font-weight: 600;
        }

        #main-navbar .nav-link:hover {
             color: var(--primary-color) !important;
        }

        #main-navbar .navbar-toggler-icon {
            filter: invert(var(--filter-invert, 0)); /* Adjust toggler icon color */
        }

        html[data-theme="dark"] #main-navbar .navbar-toggler-icon {
             filter: invert(1); /* Invert for dark mode */
        }

        /* Scroll effect for navbar */
        #main-navbar.scrolled {
            background-color: var(--background-color) !important; /* Solid background on scroll */
            box-shadow: var(--card-shadow);
        }


        /* --- Branding Section --- */
        .branding-section {
            padding: 100px 20px 40px; /* Top padding to clear fixed navbar, other padding */
            background-color: var(--branding-bg); /* Background based on theme */
             transition: background-color 0.3s ease;
        }

         .branding-logo {
             width: 150px; /* Ukuran logo di branding section */
             height: auto;
             margin: 0 auto 20px; /* Margin bawah */
             display: block;
             filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1)); /* Shadow for logo */
         }

         .branding-section h1 {
             font-size: 2.5rem; /* Ukuran judul */
             font-weight: 700;
             margin-bottom: 10px;
             color: var(--branding-title-color); /* Warna judul */
             transition: color 0.3s ease;
         }

         .branding-section p {
             font-size: 1.1rem; /* Ukuran tagline */
             color: var(--branding-text-color); /* Warna tagline */
             transition: color 0.3s ease;
         }

         @media (max-width: 768px) {
             .branding-section h1 {
                 font-size: 2rem;
             }
             .branding-logo {
                 width: 120px;
                 margin-bottom: 15px;
             }
         }


        /* --- Main Content --- */
        main {
             padding-top: 40px; /* Padding atas main */
             padding-bottom: 40px; /* Padding bawah main */
        }
        main .container {
             max-width: 1200px;
        }


        /* --- Menu Category Titles --- */
        .menu-category {
            font-size: 2rem; /* Ukuran judul kategori */
            font-weight: 700;
            margin-top: 40px; /* Space above categories */
            margin-bottom: 25px; /* Space below category title */
            color: var(--menu-category-color); /* Color based on theme */
            position: relative;
            padding-bottom: 10px;
             text-align: center; /* Center category titles */
        }
         .menu-category::after { /* Underline effect for categories */
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            height: 3px;
            width: 60px;
            background-color: var(--accent-color);
            border-radius: 1.5px;
         }


        /* --- Menu Item Card Style --- */
        .menu-item-card {
            background-color: var(--card-background);
            color: var(--text-color);
            border: 1px solid var(--menu-item-border); /* Border based on theme */
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
            height: 100%; /* Equal height */
             display: flex; /* Use flexbox to align content */
             flex-direction: column;
        }

        .menu-item-card:hover {
            transform: translateY(-5px);
             box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
         html[data-theme="dark"] .menu-item-card:hover {
             box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
         }

         .menu-item-card .card-body {
             padding: 20px;
             flex-grow: 1; /* Allow body to grow */
             display: flex; /* Use flexbox for body content */
             flex-direction: column;
             justify-content: space-between; /* Space out title, price, button */
             align-items: center;
         }

         .menu-item-card .card-title {
             font-size: 1.25rem;
             font-weight: 600;
             color: var(--text-color); /* Title color */
             margin-bottom: 0.5rem; /* Adjust margin */
             text-align: center;
         }

         .menu-item-card .card-text {
             color: var(--secondary-color); /* Price text color */
             font-size: 1.1rem;
             font-weight: 600;
             margin-top: auto; /* Push price down if body flex-col */
             margin-bottom: 15px; /* Space before button */
             text-align: center;
         }

         .menu-item-card .add-to-order { /* Style for the 'Tambah' button on cards */
             margin-top: auto; /* Push button to bottom */
             width: 100%;
             font-size: 1rem;
         }


        /* --- Order Form Section --- */
         .order-form-section {
             margin-top: 60px; /* Space above the form section */
             padding-top: 40px;
             border-top: 1px solid var(--menu-item-border); /* Separator */
         }
         .order-form-container { /* Container for the form inputs and summary */
             background: var(--form-container-bg);
             border-radius: 15px;
             padding: 30px;
             box-shadow: var(--card-shadow);
             transition: background-color 0.3s ease, box-shadow 0.3s ease;
             max-width: 800px; /* Max width for form area */
             margin: 0 auto;
         }

         .order-form-container h2 {
             margin-bottom: 30px;
         }

         /* Form Elements (from form.html CSS) */
         .order-form-container .form-label {
             color: var(--text-color);
             font-weight: 600;
             margin-bottom: 8px;
         }

         .order-form-container .form-label i {
             margin-right: 8px;
             color: var(--primary-color);
         }

         .order-form-container .form-control,
         .order-form-container .form-select {
             border-radius: 8px;
             padding: 10px 15px;
             border: 1px solid #ced4da;
             background-color: var(--background-color); /* Input/Select background based on body */
             color: var(--text-color);
             transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, color 0.3s ease;
         }
          html[data-theme="dark"] .order-form-container .form-control,
          html[data-theme="dark"] .order-form-container .form-select {
               border-color: #555;
               background-color: #444;
          }

          .order-form-container .form-control:focus,
          html[data-theme="dark"] .order-form-container .form-control:focus, /* Ensure focus style in dark mode */
          .order-form-container .form-select:focus,
           html[data-theme="dark"] .order-form-container .form-select:focus { /* Ensure focus style in dark mode */
             border-color: var(--primary-color);
             box-shadow: 0 0 8px rgba(var(--primary-color-rgb), 0.5);
             outline: none;
              background-color: var(--background-color);
          }

          /* Order List Summary (from form.html CSS) */
         .order-list-summary { /* New class for the summary section */
             margin-top: 30px;
             border-top: 1px solid var(--order-item-border-list);
             padding-top: 20px;
         }

         .order-list-summary h5 {
             color: var(--section-title-color);
             margin-bottom: 15px;
             font-weight: 600;
         }

         #orderList {
             border: 1px solid var(--order-item-border-list);
             border-radius: 8px;
             padding: 0 15px;
              background-color: var(--background-color);
              box-shadow: var(--card-shadow);
         }

         .order-item { /* Style for individual items in the summary list */
             display: flex;
             justify-content: space-between;
             align-items: center;
             padding: 12px 0;
             border-bottom: 1px solid var(--order-item-border-list);
             color: var(--text-color);
             transition: color 0.3s ease;
         }

         .order-item:last-child {
             border-bottom: none;
         }

         .order-item span {
             flex: 1;
             margin-right: 10px;
             word-break: break-word;
         }
          .order-item span:nth-child(2) { /* Quantity */
              flex: none;
              width: 60px; /* Wider for input */
              text-align: center;
              margin-right: 5px;
          }
           /* Quantity Input inside order list */
           .order-item input[type="number"] {
                width: 50px; /* Control input width */
                padding: 4px;
                border-radius: 4px;
                border: 1px solid var(--order-item-border-list);
                background-color: var(--background-color);
                color: var(--text-color);
                text-align: center;
                transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
           }
           html[data-theme="dark"] .order-item input[type="number"] {
                border-color: #666;
                background-color: #555;
           }


          .order-item span:nth-child(3) { /* Price */
              flex: none;
              width: 120px;
              text-align: right;
              font-weight: 600;
          }


         .order-item button { /* Style for remove button in summary list */
             background-color: #dc3545;
             border: none;
             color: white;
             padding: 4px 8px;
             border-radius: 4px;
             cursor: pointer;
             transition: background-color 0.3s ease, opacity 0.3s ease;
         }

         .order-item button:hover {
             background-color: #c82333;
             opacity: 0.9;
         }


         #totalPrice {
             margin-top: 20px !important;
             font-size: 1.2rem;
             color: var(--section-title-color);
              font-weight: 700 !important;
         }

         .confirmation-message {
             font-weight: bold;
             margin-top: 15px;
             text-align: center;
             /* Using Bootstrap alert classes will handle colors and display */
         }

          /* Style for QRIS image placeholder */
          .qris-image {
              display: block; /* Make it a block element */
              margin: 15px auto 10px; /* Center and add space */
              max-width: 150px; /* Example max width */
              height: auto;
              border: 1px solid #ccc; /* Optional border */
              padding: 5px;
              background-color: white; /* QRIS image usually needs light background */
              border-radius: 5px;
              box-shadow: 0 2px 5px rgba(0,0,0,0.1);
          }
           html[data-theme="dark"] .qris-image {
              border-color: #666;
              box-shadow: 0 2px 5px rgba(0,0,0,0.3);
           }

         /* Style for the proceed button */
         #proceedBtn {
             background-color: var(--button-success-background);
             border-color: var(--button-success-border);
             color: white;
             transition: background-color 0.3s ease, border-color 0.3s ease, opacity 0.3s ease;
             font-size: 1.1rem;
             padding: 12px 25px;
             font-weight: 600;
             border-radius: 8px;
         }
         #proceedBtn:hover {
             background-color: var(--button-success-hover);
             border-color: var(--button-success-hover);
             opacity: 0.95;
         }


        /* --- Footer --- */
        footer {
            margin-top: auto; /* Push footer to the bottom */
            padding: 30px 0;
            background-color: var(--footer-background); /* Background based on theme */
            color: var(--footer-text-color); /* Text color based on theme */
            text-align: center;
            transition: background-color 0.3s ease, color 0.3s ease;
            font-size: 1rem; /* Adjust font size */
        }

        footer a {
            color: var(--footer-text-color);
        }

        /* --- Theme Toggle Button (Sama seperti file lainnya) --- */
        #theme-toggle {
            position: fixed;
            bottom: 20px; /* Jarak dari bawah */
            right: 20px; /* Jarak dari kanan */
            z-index: 1030;
        }

        #theme-toggle-button {
            background-color: var(--card-background);
            border-color: var(--secondary-color);
            color: var(--text-color);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
            border-radius: 50%; /* Make it round */
            box-shadow: var(--card-shadow); /* Add shadow */
            cursor: pointer; /* Indicate it's clickable */
        }

        #theme-toggle-button:hover {
             background-color: var(--secondary-color);
             color: var(--card-background);
             border-color: var(--secondary-color);
             transform: scale(1.1);
        }


    </style>
</head>
<body>

    <div id="theme-toggle">
        <button type="button" class="btn btn-secondary" id="theme-toggle-button" aria-label="Toggle theme">
            <i class="bi bi-moon-fill"></i>
        </button>
    </div>

    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-transparent fixed-top" id="main-navbar">
            <div class="container">
                <a class="navbar-brand d-flex align-items-center" href="index.html"> <img src="logojastipgacoan.jpg" alt="Logo Jastip Gacoan" height="30" class="me-2">
                    Jastip Gacoan
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="index.html">Beranda</a></li>
                        <li class="nav-item"><a class="nav-link active" aria-current="page" href="#">Pesan Sekarang</a></li> <li class="nav-item"><a class="nav-link" href="pesanan.html">Pesanan</a></li>
                        <li class="nav-item"><a class="nav-link" href="kontakkami.html">Kontak</a></li>
                        <li class="nav-item"><a class="nav-link" href="jadwal.html">Status Layanan</a></li>
                         <li class="nav-item"><a class="nav-link btn btn-outline-light btn-sm ms-2" href="login.html">Login Admin</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <section class="branding-section">
        <div class="container text-center">
             <img src="logojastipgacoan.jpg" alt="Jastip Gacoan Logo" class="branding-logo">
            <h1>Menu & Pesan</h1> <p>Pilih menu favorit Anda dan lengkapi detail pemesanan di sini.</p> </div>
    </section>


    <main>
        <div class="container">
            <section id="menu-display-section">
                 <h3 class="menu-category">Mie Gacoan (Rp 15.000)</h3>
                <div class="row g-4">
                    <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Mie Gacoan Level 1</h5>
                                <p class="card-text">Rp 15.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Mie Gacoan Level 1" data-price="15000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Mie Gacoan Level 2</h5>
                                <p class="card-text">Rp 15.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Mie Gacoan Level 2" data-price="15000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Mie Gacoan Level 3</h5>
                                <p class="card-text">Rp 15.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Mie Gacoan Level 3" data-price="15000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Mie Gacoan Level 4</h5>
                                <p class="card-text">Rp 15.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Mie Gacoan Level 4" data-price="15000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Mie Gacoan Level 5</h5>
                                <p class="card-text">Rp 15.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Mie Gacoan Level 5" data-price="15000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Mie Gacoan Level 6</h5>
                                <p class="card-text">Rp 15.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Mie Gacoan Level 6" data-price="15000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Mie Gacoan Level 7</h5>
                                <p class="card-text">Rp 15.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Mie Gacoan Level 7" data-price="15000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Mie Gacoan Level 8</h5>
                                <p class="card-text">Rp 15.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Mie Gacoan Level 8" data-price="15000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                </div> <h3 class="menu-category">Mie Suit (Original)</h3>
                <div class="row g-4">
                    <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Mie Suit Original</h5>
                                <p class="card-text">Rp 16.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Mie Suit Original" data-price="16000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                </div> <h3 class="menu-category">Mie Hompimpa (Rp 15.000)</h3>
                <div class="row g-4">
                     <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Mie Hompimpa Level 1</h5>
                                 <p class="card-text">Rp 15.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Mie Hompimpa Level 1" data-price="15000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                      <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Mie Hompimpa Level 2</h5>
                                 <p class="card-text">Rp 15.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Mie Hompimpa Level 2" data-price="15000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                      <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Mie Hompimpa Level 3</h5>
                                 <p class="card-text">Rp 15.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Mie Hompimpa Level 3" data-price="15000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                      <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Mie Hompimpa Level 4</h5>
                                 <p class="card-text">Rp 15.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Mie Hompimpa Level 4" data-price="15000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                      <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Mie Hompimpa Level 5</h5>
                                 <p class="card-text">Rp 15.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Mie Hompimpa Level 5" data-price="15000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                      <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Mie Hompimpa Level 6</h5>
                                 <p class="card-text">Rp 15.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Mie Hompimpa Level 6" data-price="15000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                      <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Mie Hompimpa Level 7</h5>
                                 <p class="card-text">Rp 15.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Mie Hompimpa Level 7" data-price="15000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                      <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Mie Hompimpa Level 8</h5>
                                 <p class="card-text">Rp 15.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Mie Hompimpa Level 8" data-price="15000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                </div> <h3 class="menu-category">Dimsum (Rp 14.000)</h3>
                <div class="row g-4">
                    <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Udang Rambutan</h5>
                                <p class="card-text">Rp 14.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Udang Rambutan" data-price="14000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Lumpia Udang</h5>
                                <p class="card-text">Rp 14.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Lumpia Udang" data-price="14000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Udang Keju</h5>
                                <p class="card-text">Rp 14.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Udang Keju" data-price="14000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Siomay</h5>
                                <p class="card-text">Rp 14.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Siomay" data-price="14000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Pangsit Goreng</h5>
                                <p class="card-text">Rp 14.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Pangsit Goreng" data-price="14000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                </div> <h3 class="menu-category">Minuman</h3>
                <div class="row g-4 mb-5"> <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Es Teh</h5>
                                <p class="card-text">Rp 8.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Es Teh" data-price="8000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Lemon Tea</h5>
                                <p class="card-text">Rp 10.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Lemon Tea" data-price="10000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Le Mineral</h5>
                                <p class="card-text">Rp 5.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Le Mineral" data-price="5000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Teh Tarik</h5>
                                 <p class="card-text">Rp 10.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Teh Tarik" data-price="10000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Tai Tea</h5>
                                 <p class="card-text">Rp 10.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Tai Tea" data-price="10000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Milo</h5>
                                <p class="card-text">Rp 13.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Milo" data-price="13000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Es Coklat</h5>
                                 <p class="card-text">Rp 13.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Es Coklat" data-price="13000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Orange</h5>
                                <p class="card-text">Rp 10.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Orange" data-price="10000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                         <div class="card menu-item-card">
                             <div class="card-body">
                                 <h5 class="card-title">Es Petak Umpet</h5>
                                 <p class="card-text">Rp 15.000</p>
                                 <button class="btn btn-primary add-to-order w-100" data-name="Es Petak Umpet" data-price="15000">
                                     <i class="bi bi-bag-plus me-1"></i> Tambah
                                 </button>
                             </div>
                         </div>
                     </div>
                      <div class="col-sm-6 col-md-4 col-lg-3">
                          <div class="card menu-item-card">
                              <div class="card-body">
                                  <h5 class="card-title">Es Gobak Sodor</h5>
                                  <p class="card-text">Rp 15.000</p>
                                  <button class="btn btn-primary add-to-order w-100" data-name="Es Gobak Sodor" data-price="15000">
                                      <i class="bi bi-bag-plus me-1"></i> Tambah
                                  </button>
                              </div>
                          </div>
                      </div>
                     <div class="col-sm-6 col-md-4 col-lg-3">
                        <div class="card menu-item-card">
                            <div class="card-body">
                                <h5 class="card-title">Es Teklek</h5>
                                <p class="card-text">Rp 15.000</p>
                                <button class="btn btn-primary add-to-order w-100" data-name="Es Teklek" data-price="15000">
                                    <i class="bi bi-bag-plus me-1"></i> Tambah
                                </button>
                            </div>
                        </div>
                    </div>
                      <div class="col-sm-6 col-md-4 col-lg-3">
                          <div class="card menu-item-card">
                              <div class="card-body">
                                  <h5 class="card-title">Es Suklu Batok</h5>
                                  <p class="card-text">Rp 15.000</p>
                                  <button class="btn btn-primary add-to-order w-100" data-name="Es Suklu Batok" data-price="15000">
                                      <i class="bi bi-bag-plus me-1"></i> Tambah
                                  </button>
                              </div>
                          </div>
                      </div>
                       <div class="col-sm-6 col-md-4 col-lg-3">
                           <div class="card menu-item-card">
                               <div class="card-body">
                                   <h5 class="card-title">Tai Green Tea</h5>
                                   <p class="card-text">Rp 10.000</p>
                                   <button class="btn btn-primary add-to-order w-100" data-name="Tai Green Tea" data-price="10000">
                                       <i class="bi bi-bag-plus me-1"></i> Tambah
                                   </button>
                               </div>
                           </div>
                       </div>
                </div> </section> <section class="order-form-section">
                 <div class="order-form-container">
                     <h2>Detail Pesanan & Pengiriman</h2>

                     <form id="orderForm">
                         <div class="mb-3">
                             <label for="name" class="form-label"><i class="fas fa-user"></i> Nama Lengkap</label>
                             <input type="text" id="name" class="form-control" placeholder="Masukkan nama lengkap" required />
                         </div>
                         <div class="mb-3">
                             <label for="address" class="form-label"><i class="fas fa-map-marker-alt"></i> Alamat Pengiriman</label>
                             <textarea id="address" class="form-control" rows="3" placeholder="Contoh: Nama Jalan No. Rumah, RT/RW, Kelurahan, Kecamatan, Kota/Kabupaten" required></textarea> </div>
                         <div class="mb-3">
                             <label for="phone" class="form-label"><i class="fas fa-phone"></i> No. HP (WhatsApp)</label>
                             <input type="tel" id="phone" class="form-control" placeholder="Contoh: 081234567890" required /> </div>
                         <hr class="my-4">

                         <div class="payment-method mb-4"> <label for="paymentMethod" class="form-label"><i class="fas fa-money-check-alt"></i> Metode Pembayaran</label>
                             <select id="paymentMethod" class="form-select">
                                 <optgroup label ="Bank Transfer (atas nama Ar* Fai** W**** L******)">
                                     <option value="Bank BCA (2001166818)">BCA - 2001166818</option>
                                     <option value="Bank BNI (1729830120)">BNI - 1729830120</option>
                                 </optgroup>
                                 <optgroup label="Uang Elektronik">
                                     <option value="QRIS">QRIS</option>
                                     </optgroup>
                                 <option value="Cash On Delivery">Cash On Delivery</option>
                             </select>
                              <div id="qrisImageContainer" style="display: none; text-align: center; margin-top: 15px;">
                                  <img src="path/to/qris-image.png" alt="QRIS Payment" class="img-fluid rounded qris-image" style="max-width: 200px;">
                                  <p class="text-muted mt-2"><small>Scan kode QRIS di atas untuk pembayaran.</small></p>
                              </div>
                         </div>

                         <div class="order-list-summary"> <h5 class="mb-3"><i class="fas fa-list-alt"></i> Ringkasan Pesanan Anda</h5>
                             <div id="orderList">
                                  <p class="text-muted">Belum ada pesanan ditambahkan.</p>
                             </div>
                             <p id="totalPrice" class="mt-3 fw-bold fs-5">Total Harga: Rp 0</p>
                             <button id="proceedBtn" class="btn btn-success w-100 btn-lg mt-3" disabled>
                                 <i class="fas fa-paper-plane me-1"></i> Kirim Pesanan via WhatsApp
                             </button>
                             <div class="confirmation-message" id="confirmationMessage"></div>
                         </div>

                     </form> </div>
            </section> </div> </main>

    <footer>
        <p>© 2024 Jastip Gacoan. Hak cipta dilindungi.</p> </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Theme Toggle Functionality (Sama seperti file lainnya) ---
            const themeToggleButton = document.getElementById('theme-toggle-button');
            const htmlElement = document.documentElement; // Get the <html> element

            // Check for saved theme preference in localStorage
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                htmlElement.setAttribute('data-theme', savedTheme);
                updateThemeButtonIcon(savedTheme);
            } else {
                // Default to light theme if no preference saved
                htmlElement.setAttribute('data-theme', 'light');
                 localStorage.setItem('theme', 'light'); // Save default preference
                updateThemeButtonIcon('light');
            }

            // Add click listener to the toggle button
            themeToggleButton.addEventListener('click', toggleTheme);

            function toggleTheme() {
                const currentTheme = htmlElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';

                htmlElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme); // Save preference
                updateThemeButtonIcon(newTheme);
            }

            function updateThemeButtonIcon(theme) {
                const icon = themeToggleButton.querySelector('i.bi');
                if (theme === 'dark') {
                    icon.classList.remove('bi-moon-fill');
                    icon.classList.add('bi-brightness-high-fill'); // Icon for light mode
                } else {
                    icon.classList.remove('bi-brightness-high-fill');
                    icon.classList.add('bi-moon-fill'); // Icon for dark mode
                }
            }
            // --- End Theme Toggle Functionality ---

            // Optional: Add a class to navbar on scroll for better visibility
            const navbar = document.getElementById('main-navbar');
            let scrolled = false;

            window.addEventListener('scroll', function() {
                if (window.scrollY > 50 && !scrolled) { // Add 'scrolled' class after scrolling down 50px
                    navbar.classList.add('scrolled');
                    scrolled = true;
                } else if (window.scrollY <= 50 && scrolled) { // Remove 'scrolled' class when back at top
                    navbar.classList.remove('scrolled');
                    scrolled = false;
                }
            });


             // --- Order Form & Menu Interaction Logic ---

             const orderList = {}; // Object to store ordered items {itemName: {name, price, quantity}}
             const orderListContainer = document.getElementById('orderList'); // Div to display items in summary
             const totalPriceElem = document.getElementById('totalPrice'); // Total price paragraph
             const proceedBtn = document.getElementById('proceedBtn'); // Proceed to WhatsApp button
             const confirmationMessage = document.getElementById('confirmationMessage'); // Message area (add/remove item)

             const nameInput = document.getElementById('name'); // Customer name input
             const addressInput = document.getElementById('address'); // Customer address input
             const phoneInput = document.getElementById('phone'); // Customer phone input
             const paymentMethodSelect = document.getElementById('paymentMethod'); // Payment method select
             const qrisImageContainer = document.getElementById('qrisImageContainer'); // QRIS image container


             // Initial setup: Update order list display and button state
             updateOrderListDisplay(); // Call this with the empty initial orderList


             // Listener for "Tambah" buttons on menu item cards
             document.querySelectorAll('.add-to-order').forEach(button => {
                 button.addEventListener('click', function() {
                     const itemName = this.dataset.name; // Get name from data attribute
                     const itemPrice = parseInt(this.dataset.price); // Get price from data attribute
                     const quantityToAdd = 1; // Default quantity is 1 when clicking from menu

                     if (!itemName || isNaN(itemPrice)) {
                         console.error("Error: Invalid item data on button.", this);
                         showMessage("Gagal menambahkan item. Data menu tidak valid.", "danger");
                         return;
                     }

                     const key = itemName; // Use item name as key

                     if (orderList[key]) {
                         orderList[key].quantity += quantityToAdd; // Increment quantity if item exists
                     } else {
                         orderList[key] = { // Add new item
                             name: itemName,
                             price: itemPrice,
                             quantity: quantityToAdd
                         };
                     }

                     updateOrderListDisplay(); // Update the display in the summary
                     showMessage(`${itemName} telah ditambahkan ke pesanan.`, "success"); // Show success message
                 });
             });


             // Listener for quantity changes or remove button clicks within the Order Summary List (#orderList)
             // Use event delegation on the parent container (#orderList)
             orderListContainer.addEventListener('input', function(event) {
                 if (event.target.classList.contains('item-quantity-input')) {
                     // Handle quantity change
                     const input = event.target;
                     const itemName = input.dataset.name;
                     const newQuantity = parseInt(input.value);

                     // Ensure item exists and new quantity is a valid non-negative number
                     if (orderList[itemName] && !isNaN(newQuantity)) {
                         if (newQuantity <= 0) { // Handle 0 or less quantity as removal
                             delete orderList[itemName];
                             showMessage(`${itemName} dihapus dari pesanan.`, "danger");
                         } else {
                             // Update quantity
                             orderList[itemName].quantity = newQuantity;
                             showMessage(`Jumlah ${itemName} diperbarui menjadi ${newQuantity}.`, "info");
                         }
                         updateOrderListDisplay(); // Update the entire list display
                     } else if (orderList[itemName]) {
                         // If input is invalid (e.g., not a number), revert to the current quantity and show message
                          input.value = orderList[itemName].quantity;
                          showMessage("Jumlah harus angka positif.", "warning");
                     }
                 }
             });

             // Listener for remove button clicks within the Order Summary List (#orderList)
             // Use event delegation on the parent container (#orderList)
             orderListContainer.addEventListener('click', function(event) {
                  // Check if the clicked element OR its parent is the remove button
                  const removeButton = event.target.classList.contains('remove-item-btn') ? event.target : event.target.closest('.remove-item-btn');

                  if (removeButton) {
                      const itemName = removeButton.dataset.name;

                      if (orderList[itemName]) {
                          delete orderList[itemName];
                          updateOrderListDisplay();
                          showMessage(`${itemName} dihapus dari pesanan.`, "danger");
                      }
                  }
             });


             // Updates the display of the order list summary and total price
             function updateOrderListDisplay() {
                 orderListContainer.innerHTML = ''; // Clear current list
                 let totalPrice = 0;
                 const keys = Object.keys(orderList);

                 if (keys.length === 0) {
                     orderListContainer.innerHTML = '<p class="text-muted">Belum ada pesanan ditambahkan.</p>'; // Default text
                     totalPriceElem.textContent = 'Total Harga: Rp 0';
                     proceedBtn.disabled = true; // Disable button if no items
                 } else {
                     keys.forEach(key => {
                         const item = orderList[key];
                         const subtotal = item.price * item.quantity;
                         totalPrice += subtotal;

                         const div = document.createElement('div');
                         div.className = 'order-item'; // Use order-item class

                         const spanName = document.createElement('span');
                         spanName.textContent = item.name;

                         // Use input type="number" for quantity
                         const qtyInputSpan = document.createElement('span');
                         const qtyInput = document.createElement('input');
                         qtyInput.type = 'number';
                         qtyInput.value = item.quantity;
                         qtyInput.min = "0"; // Allow setting to 0 to remove
                         qtyInput.classList.add('item-quantity-input'); // Class to identify input
                         qtyInput.dataset.name = item.name; // Store item name in data attribute
                         qtyInputSpan.appendChild(qtyInput);


                         const spanPrice = document.createElement('span');
                         spanPrice.textContent = 'Rp ' + subtotal.toLocaleString('id-ID');

                         const btnRemove = document.createElement('button');
                         btnRemove.innerHTML = '<i class="fas fa-trash-alt"></i>'; // Use trash icon
                         btnRemove.className = 'btn btn-sm btn-danger remove-item-btn'; // Bootstrap danger button, add custom class
                         btnRemove.title = 'Hapus Item'; // Add tooltip
                         btnRemove.dataset.name = item.name; // Store item name for removal


                         div.appendChild(spanName);
                         div.appendChild(qtyInputSpan); // Add input instead of spanQty
                         div.appendChild(spanPrice);
                         div.appendChild(btnRemove);

                         orderListContainer.appendChild(div);
                     });

                     totalPriceElem.textContent = 'Total Harga: Rp ' + totalPrice.toLocaleString('id-ID');
                     // Enable proceed button only if there are items AND required customer info is filled
                      checkFormValidity();
                 }
             }


             // Function to check if required form fields are filled AND order list is not empty
             function checkFormValidity() {
                 const name = nameInput.value.trim();
                 const address = addressInput.value.trim();
                 const phone = phoneInput.value.trim();

                 const isFormFilled = name !== '' && address !== '' && phone !== '';
                 const hasItems = Object.keys(orderList).length > 0;

                 proceedBtn.disabled = !(isFormFilled && hasItems); // Button is enabled only if both are true
             }

             // Add event listeners to customer info fields to check validity dynamically
             nameInput.addEventListener('input', checkFormValidity);
             addressInput.addEventListener('input', checkFormValidity);
             phoneInput.addEventListener('input', checkFormValidity);


             // Listener for Payment Method select to show/hide QRIS image
             paymentMethodSelect.addEventListener('change', function() {
                 if (paymentMethodSelect.value === 'QRIS') {
                     // PERHATIAN: Ganti src dengan path gambar QRIS Anda yang sebenarnya
                     qrisImageContainer.querySelector('.qris-image').src = 'path/to/qris-image.png'; // Ensure correct path is set
                     qrisImageContainer.style.display = 'block';
                 } else {
                     qrisImageContainer.style.display = 'none';
                 }
             });


             // Listener for Proceed to WhatsApp button
             proceedBtn.addEventListener('click', () => {
                 // Disable button immediately to prevent double clicks
                 proceedBtn.disabled = true;
                 showMessage('Memproses pesanan...', 'info'); // Indicate processing

                 const name = nameInput.value.trim();
                 const address = addressInput.value.trim();
                 const phone = phoneInput.value.trim();
                 const paymentMethod = paymentMethodSelect.value;

                 // Re-validate before proceeding (redundant if checkFormValidity works, but good fail-safe)
                 if (!name || !address || !phone || Object.keys(orderList).length === 0) {
                     alert('Mohon lengkapi data diri dan tambahkan pesanan.');
                      checkFormValidity(); // Re-check validity to re-enable if needed
                     showMessage('Mohon lengkapi data.', 'warning');
                     return;
                 }

                 // Prepare detailed message for WhatsApp
                 const totalHarga = Object.values(orderList).reduce((total, item) => total + (item.price * item.quantity), 0);
                 let message = `*Pesanan Jastip Gacoan Baru*\n\n` + // Clearer title
                     `*Data Pelanggan:*\n` + // Section header
                     `- Nama: ${name}\n` +
                     `- No. HP: ${phone}\n` +
                     `- Alamat Pengiriman: ${address}\n` +
                     `- Metode Pembayaran: ${paymentMethod}\n\n`;

                  // Detail Pesanan section
                  message += `*Detail Pesanan:*\n`;
                  // Map over orderList items to format them
                  message += Object.values(orderList)
                      .map(item => `- ${item.name} (x${item.quantity}) = Rp ${item.price * item.quantity}`) // Format subtotal
                      .join('\n');

                  message += `\n\n*Total Harga Keseluruhan:* Rp ${totalHarga.toLocaleString('id-ID')}`; // Clearer total label


                 // Get GPS location and add to message
                 if (navigator.geolocation) {
                     showMessage('Mendapatkan lokasi GPS...', 'info');
                     navigator.geolocation.getCurrentPosition(position => {
                         const latitude = position.coords.latitude;
                         const longitude = position.coords.longitude;
                          // Correct Google Maps link format (using Google Maps web URL)
                         // Note: The format might vary slightly between devices/browsers,
                         // but lat,lon should be understood by Google Maps app/web.
                         const mapsLink = `https://maps.google.com/?q=${latitude},${longitude}`;


                         const locationMessage = `\n\n*Lokasi Pengiriman:*\n- Latitude: ${latitude}\n- Longitude: ${longitude}\n- [Lihat di Google Maps](${mapsLink})`; // Clearer labels and link text

                         const adminNumber = '6285156226837'; // Admin's WhatsApp number (pastikan format ini benar untuk link wa.me)
                         // Encode the full message including location
                         const adminUrl = `https://wa.me/${adminNumber}?text=${encodeURIComponent(message + locationMessage)}`;

                         // Redirect to WhatsApp (use window.open to keep the current page)
                          showMessage('Lokasi didapat. Mengarahkan ke WhatsApp...', 'info');
                         const newWindow = window.open(adminUrl, '_blank');

                         // Add a slight delay before potentially clearing the form
                          setTimeout(() => {
                              // Check if the new window was successfully opened (optional check)
                              // if (newWindow && !newWindow.closed) {
                                   document.getElementById('orderForm').reset(); // Reset customer info form
                                   orderList = {}; // Clear the orderList object
                                   updateOrderListDisplay(); // Update the display
                                   showMessage('Pesanan berhasil dikirim (silakan cek jendela WhatsApp).', 'success');
                              // } else {
                                  // Handle cases where popup blocker or browser prevents opening
                                  // showMessage('Gagal membuka WhatsApp. Pastikan pop-up tidak diblokir.', 'warning');
                                  // checkFormValidity(); // Re-enable button if sending failed
                              // }
                               checkFormValidity(); // Ensure button state is correct after process
                          }, 2000); // Delay increased to 2 seconds


                     }, (error) => {
                         console.error('Geolocation error:', error);
                         let errorMessage = 'Gagal mendapatkan lokasi GPS.';
                         switch(error.code) {
                             case error.PERMISSION_DENIED:
                               errorMessage = "Anda perlu mengizinkan akses lokasi untuk mengirim pesanan dengan lokasi GPS.";
                               break;
                             case error.POSITION_UNAVAILABLE:
                               errorMessage = "Informasi lokasi tidak tersedia.";
                               break;
                             case error.TIMEOUT:
                               errorMessage = "Permintaan untuk mendapatkan lokasi GPS timed out.";
                               break;
                             case error.UNKNOWN_ERROR:
                               errorMessage = "Terjadi kesalahan yang tidak diketahui saat mendapatkan lokasi GPS.";
                               break;
                         }
                         showMessage(errorMessage + ' Pesanan akan dikirim tanpa lokasi.', 'warning'); // Show warning but proceed

                         // Proceed to WhatsApp without location
                         const adminNumber = '6285156226837';
                         const adminUrl = `https://wa.me/${adminNumber}?text=${encodeURIComponent(message + "\n\n*Catatan:* Lokasi GPS tidak dapat diperoleh.")}`;
                         const newWindow = window.open(adminUrl, '_blank'); // Use window.open

                          // Optional: Clear form after sending without location
                           setTimeout(() => {
                               // if (newWindow && !newWindow.closed) {
                                   document.getElementById('orderForm').reset();
                                   orderList = {};
                                   updateOrderListDisplay();
                                   showMessage('Pesanan berhasil dikirim (silakan cek jendela WhatsApp), tanpa lokasi GPS.', 'success');
                              // } else {
                                   // showMessage('Gagal membuka WhatsApp. Pastikan pop-up tidak diblokir.', 'warning');
                              // }
                                checkFormValidity(); // Ensure button state is correct after process
                           }, 2000); // Delay increased
                     });
                 } else {
                     // Browser doesn't support Geolocation
                     showMessage('Perangkat Anda tidak mendukung Geolocation (GPS). Pesanan akan dikirim tanpa lokasi.', 'warning');

                      // Proceed to WhatsApp without location
                      const adminNumber = '6285156226837';
                      const adminUrl = `https://wa.me/${adminNumber}?text=${encodeURIComponent(message + "\n\n*Catatan:* Perangkat tidak mendukung Geolocation (GPS).")}`;
                      const newWindow = window.open(adminUrl, '_blank'); // Use window.open

                       // Optional: Clear form after sending without location
                       setTimeout(() => {
                           // if (newWindow && !newWindow.closed) {
                               document.getElementById('orderForm').reset();
                               orderList = {};
                               updateOrderListDisplay();
                               showMessage('Pesanan berhasil dikirim (silakan cek jendela WhatsApp), tanpa lokasi GPS.', 'success');
                          // } else {
                               // showMessage('Gagal membuka WhatsApp. Pastikan pop-up tidak diblokir.', 'warning');
                          // }
                           checkFormValidity(); // Ensure button state is correct after process
                       }, 2000); // Delay increased
                 }
             });

             // Function to show temporary messages (using Bootstrap alerts)
             function showMessage(msg, type) {
                 // Always ensure display is block when showing a message
                 confirmationMessage.style.display = 'block';

                  // Remove existing alert classes and fade/show classes
                 confirmationMessage.classList.remove('alert-success', 'alert-info', 'alert-warning', 'alert-danger', 'fade', 'show');

                 // Add new alert class based on type
                  let alertClass;
                  switch(type) {
                      case 'success': alertClass = 'alert-success'; break;
                      case 'info': alertClass = 'alert-info'; break;
                      case 'warning': alertClass = 'alert-warning'; break;
                      case 'danger': alertClass = 'alert-danger'; break;
                      default: alertClass = 'alert-secondary';
                  }
                 // Set the new classes and innerHTML, add fade and show to trigger Bootstrap transition
                 confirmationMessage.className = 'confirmation-message alert alert-dismissible fade show ' + alertClass;
                 confirmationMessage.innerHTML = msg + '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>';

                 // Optional: Automatically hide the message after a few seconds (unless it's a danger message)
                 // if (type !== 'danger') {
                 //     setTimeout(() => {
                 //         // Use Bootstrap's dismiss method or just hide
                 //         // new bootstrap.Alert(confirmationMessage).hide(); // Requires Bootstrap's JS Alert component
                 //         confirmationMessage.style.display = 'none';
                 //     }, 5000); // Hide after 5 seconds
                 // }
             }

             // Initial check on page load (button should be disabled initially)
             checkFormValidity();

             // --- End Order Form & Menu Interaction Logic ---

        });
    </script>
</body>
</html>